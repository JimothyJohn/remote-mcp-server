<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Guide - Remote MCP Server</title>
    <meta name="description" content="Comprehensive deployment guide for Remote MCP Server on AWS Lambda, Docker, and local environments.">
    <link rel="canonical" href="https://JimothyJohn.github.io/remote-mcp-server/deployment.html">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-black: #000000;
            --soft-black: #1a1a1a;
            --dark-gray: #2d2d2d;
            --medium-gray: #4a4a4a;
            --light-gray: #6b6b6b;
            --very-light-gray: #8a8a8a;
            --border-gray: #e0e0e0;
            --white: #ffffff;
            --off-white: #f8f8f8;
            --text-primary: var(--primary-black);
            --text-secondary: var(--medium-gray);
            --text-muted: var(--light-gray);
            --bg-primary: var(--white);
            --bg-secondary: var(--off-white);
            --bg-tertiary: #f4f4f4;
            --accent-color: var(--dark-gray);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            color: var(--text-primary);
            background: var(--bg-primary);
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-gray);
            z-index: 1000;
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-black), var(--dark-gray));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }
        
        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover, .nav-links a.active {
            color: var(--primary-black);
        }
        
        /* Main Content */
        .main-content {
            margin-top: 80px;
            padding: 2rem;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .content-header {
            margin-bottom: 3rem;
            text-align: center;
        }
        
        .content-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-black), var(--dark-gray));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }
        
        .content-subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: var(--text-primary);
            margin: 2rem 0 1rem 0;
            line-height: 1.3;
        }
        
        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; border-bottom: 2px solid var(--border-gray); padding-bottom: 0.5rem; }
        h3 { font-size: 1.5rem; color: var(--accent-color); }
        h4 { font-size: 1.3rem; }
        h5 { font-size: 1.1rem; }
        h6 { font-size: 1rem; }
        
        p {
            color: var(--text-secondary);
            margin: 1rem 0;
            line-height: 1.7;
        }
        
        /* Lists */
        ul, ol {
            color: var(--text-secondary);
            margin: 1rem 0;
            padding-left: 2rem;
        }
        
        li {
            margin: 0.5rem 0;
        }
        
        /* Links */
        a {
            color: var(--primary-black);
            text-decoration: none;
        }
        
        a:hover {
            color: var(--dark-gray);
            text-decoration: underline;
        }
        
        /* Code blocks */
        pre {
            background: var(--bg-secondary);
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        
        code {
            background: var(--bg-tertiary);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        /* Sections */
        .section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--border-gray);
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-gray);
        }
        
        th {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-weight: 600;
        }
        
        td {
            color: var(--text-secondary);
        }
        
        /* Info boxes */
        .info-box {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #f9f9f9, #f0f0f0);
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .content-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <a href="index.html" class="logo">Remote MCP Server</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="contributing.html">Contributing</a></li>
                <li><a href="claude.html">Claude Guide</a></li>
                <li><a href="deployment.html" class="active">Deployment</a></li>
                <li><a href="api.html">API</a></li>
                <li><a href="https://github.com/JimothyJohn/remote-mcp-server">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content">
        <div class="content-header">
            <h1 class="content-title">Deployment Guide</h1>
            <p class="content-subtitle">Comprehensive deployment guide for AWS Lambda, Docker containers, and local development setups.</p>
        </div>

        <div class="section">
            <h2>Quick Start</h2>
            
            <h3>AWS Lambda Deployment</h3>
            <pre><code class="language-bash"># Clone and deploy
git clone https://github.com/JimothyJohn/remote-mcp-server.git
cd remote-mcp-server
uv sync
sam build && sam deploy --guided</code></pre>

            <h3>Docker Deployment</h3>
            <pre><code class="language-bash"># Build and run
docker build -t remote-mcp-server .
docker run -p 3000:3000 remote-mcp-server</code></pre>

            <h3>Local Development</h3>
            <pre><code class="language-bash"># Install and run
uv sync --group dev
uv run remote-mcp-server</code></pre>
        </div>

        <div class="section">
            <h2>Prerequisites</h2>
            <table>
                <thead>
                    <tr>
                        <th>Tool</th>
                        <th>Version</th>
                        <th>Purpose</th>
                        <th>Required For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>AWS CLI</td>
                        <td>2.x+</td>
                        <td>AWS resource management</td>
                        <td>Lambda deployment</td>
                    </tr>
                    <tr>
                        <td>SAM CLI</td>
                        <td>1.40+</td>
                        <td>Serverless deployment</td>
                        <td>Lambda deployment</td>
                    </tr>
                    <tr>
                        <td>Python</td>
                        <td>3.11+</td>
                        <td>Runtime environment</td>
                        <td>All deployments</td>
                    </tr>
                    <tr>
                        <td>UV</td>
                        <td>Latest</td>
                        <td>Package management</td>
                        <td>Local development</td>
                    </tr>
                    <tr>
                        <td>Docker</td>
                        <td>20.x+</td>
                        <td>Containerization</td>
                        <td>Docker deployment</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>AWS Lambda Deployment</h2>
            
            <h3>Configuration Parameters</h3>
            <p>During <code>sam deploy --guided</code>, configure these parameters:</p>
            
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                        <th>Default</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Stack name</td>
                        <td>CloudFormation stack name</td>
                        <td>remote-mcp-server</td>
                        <td>my-mcp-server</td>
                    </tr>
                    <tr>
                        <td>AWS Region</td>
                        <td>Deployment region</td>
                        <td>Current region</td>
                        <td>us-east-1</td>
                    </tr>
                    <tr>
                        <td>Environment</td>
                        <td>Runtime environment</td>
                        <td>production</td>
                        <td>staging</td>
                    </tr>
                    <tr>
                        <td>Memory Size</td>
                        <td>Lambda memory (MB)</td>
                        <td>256</td>
                        <td>512</td>
                    </tr>
                </tbody>
            </table>

            <h3>Environment-Specific Deployments</h3>
            
            <h4>Development</h4>
            <pre><code class="language-bash">sam deploy \
  --stack-name remote-mcp-server-dev \
  --parameter-overrides \
    Environment=development \
    LogLevel=DEBUG \
    MemorySize=128</code></pre>

            <h4>Production</h4>
            <pre><code class="language-bash">sam deploy \
  --stack-name remote-mcp-server-prod \
  --parameter-overrides \
    Environment=production \
    LogLevel=WARNING \
    MemorySize=512 \
    Timeout=60</code></pre>

            <h3>Post-Deployment Verification</h3>
            <pre><code class="language-bash"># Get API Gateway URL
aws cloudformation describe-stacks \
  --stack-name remote-mcp-server \
  --query 'Stacks[0].Outputs[?OutputKey==`RemoteMcpServerApi`].OutputValue' \
  --output text

# Test endpoints
curl https://your-api-url/Prod/health
curl -X POST https://your-api-url/Prod/remote-mcp-server \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"tools/call","params":{"name":"hello_world"},"id":1}'</code></pre>
        </div>

        <div class="section">
            <h2>Docker Deployment</h2>
            
            <h3>Building Images</h3>
            
            <h4>Development Image</h4>
            <pre><code class="language-bash"># Build with development tools
docker build -t remote-mcp-server:dev --target development .

# Run with hot reload
docker run -p 3000:3000 -v $(pwd):/app remote-mcp-server:dev</code></pre>

            <h4>Production Image</h4>
            <pre><code class="language-bash"># Build optimized production image
docker build -t remote-mcp-server:prod --target production .

# Run in production mode
docker run -d --name mcp-server \
  --restart unless-stopped \
  -p 8080:8080 \
  remote-mcp-server:prod</code></pre>

            <h3>Docker Compose</h3>
            <pre><code class="language-bash"># Development services
docker-compose up -d dev

# Production simulation
docker-compose up prod

# Run tests
docker-compose run --rm test</code></pre>

            <h3>Environment Variables</h3>
            <table>
                <thead>
                    <tr>
                        <th>Variable</th>
                        <th>Description</th>
                        <th>Default</th>
                        <th>Docker Default</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>PORT</td>
                        <td>Server port</td>
                        <td>3000</td>
                        <td>8080</td>
                    </tr>
                    <tr>
                        <td>LOG_LEVEL</td>
                        <td>Logging level</td>
                        <td>INFO</td>
                        <td>INFO</td>
                    </tr>
                    <tr>
                        <td>ENVIRONMENT</td>
                        <td>Environment name</td>
                        <td>development</td>
                        <td>production</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Local Development</h2>
            
            <h3>Direct Python Execution</h3>
            <pre><code class="language-bash"># Install dependencies
uv sync --group dev

# Run MCP server (stdio mode)
uv run python -m remote_mcp_server.mcp_server

# Run with custom parameters
uv run python -m remote_mcp_server.mcp_server --port 8000 --log-level DEBUG</code></pre>

            <h3>SAM Local Testing</h3>
            <pre><code class="language-bash"># Start local API Gateway
sam local start-api --port 3000

# Test local endpoints
curl http://127.0.0.1:3000/health
curl http://127.0.0.1:3000/remote-mcp-server

# Invoke function directly
sam local invoke RemoteMcpServerFunction --event event.json</code></pre>

            <h3>Development Scripts</h3>
            <table>
                <thead>
                    <tr>
                        <th>Script</th>
                        <th>Purpose</th>
                        <th>Usage</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>./scripts/test.sh</td>
                        <td>Run complete test suite</td>
                        <td>Quality assurance</td>
                    </tr>
                    <tr>
                        <td>./scripts/build.sh</td>
                        <td>Build application and Docker</td>
                        <td>Pre-deployment</td>
                    </tr>
                    <tr>
                        <td>./scripts/deploy.sh</td>
                        <td>Deploy with validation</td>
                        <td>Automated deployment</td>
                    </tr>
                    <tr>
                        <td>./scripts/local-dev.sh</td>
                        <td>Start development environment</td>
                        <td>Local development</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Production Best Practices</h2>
            
            <h3>Security</h3>
            <ul>
                <li><strong>IAM Roles</strong>: Use least privilege principles</li>
                <li><strong>API Gateway</strong>: Enable throttling and request validation</li>
                <li><strong>Environment Variables</strong>: Never hardcode secrets</li>
                <li><strong>HTTPS Only</strong>: Enforce encrypted connections</li>
            </ul>

            <h3>Performance Optimization</h3>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Optimization</th>
                        <th>Impact</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Lambda Memory</td>
                        <td>512 MB for production</td>
                        <td>Reduced cold starts</td>
                    </tr>
                    <tr>
                        <td>Provisioned Concurrency</td>
                        <td>5 instances for high traffic</td>
                        <td>Consistent performance</td>
                    </tr>
                    <tr>
                        <td>API Gateway Caching</td>
                        <td>300 seconds for GET requests</td>
                        <td>Improved response times</td>
                    </tr>
                    <tr>
                        <td>Connection Reuse</td>
                        <td>Initialize outside handler</td>
                        <td>Lower latency</td>
                    </tr>
                </tbody>
            </table>

            <h3>Monitoring</h3>
            <ul>
                <li><strong>CloudWatch Alarms</strong>: Error rate and latency monitoring</li>
                <li><strong>Application Insights</strong>: Automatic application monitoring</li>
                <li><strong>Custom Metrics</strong>: Business logic performance tracking</li>
                <li><strong>Log Aggregation</strong>: Centralized logging with structured format</li>
            </ul>
        </div>

        <div class="section">
            <h2>Multi-Region Deployment</h2>
            
            <h3>Primary Region (us-east-1)</h3>
            <pre><code class="language-bash">sam deploy \
  --stack-name remote-mcp-server-primary \
  --region us-east-1 \
  --parameter-overrides Environment=production</code></pre>

            <h3>Secondary Region (us-west-2)</h3>
            <pre><code class="language-bash">sam deploy \
  --stack-name remote-mcp-server-secondary \
  --region us-west-2 \
  --parameter-overrides Environment=production</code></pre>

            <div class="info-box">
                <p><strong>Note:</strong> Multi-region deployment provides high availability and disaster recovery capabilities. Consider Route 53 health checks for automatic failover.</p>
            </div>
        </div>

        <div class="section">
            <h2>Troubleshooting</h2>
            
            <h3>Common Issues</h3>
            <table>
                <thead>
                    <tr>
                        <th>Issue</th>
                        <th>Symptom</th>
                        <th>Solution</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Cold Start Latency</td>
                        <td>Slow initial responses</td>
                        <td>Increase memory or enable provisioned concurrency</td>
                    </tr>
                    <tr>
                        <td>Timeout Errors</td>
                        <td>504 Gateway Timeout</td>
                        <td>Increase Lambda timeout value</td>
                    </tr>
                    <tr>
                        <td>Permission Errors</td>
                        <td>403 Forbidden responses</td>
                        <td>Check IAM role permissions</td>
                    </tr>
                    <tr>
                        <td>502 Bad Gateway</td>
                        <td>API Gateway errors</td>
                        <td>Check Lambda function logs</td>
                    </tr>
                </tbody>
            </table>

            <h3>Monitoring Commands</h3>
            <pre><code class="language-bash"># View CloudFormation events
aws cloudformation describe-stack-events --stack-name remote-mcp-server

# Monitor Lambda metrics
aws cloudwatch get-metric-statistics \
  --namespace AWS/Lambda \
  --metric-name Duration \
  --dimensions Name=FunctionName,Value=remote-mcp-server-Function \
  --start-time 2025-08-22T00:00:00Z \
  --end-time 2025-08-22T23:59:59Z \
  --period 3600 \
  --statistics Average,Maximum

# View recent logs
sam logs --stack-name remote-mcp-server --start-time 2025-08-22T00:00:00</code></pre>
        </div>

        <div class="section">
            <h2>Production Checklist</h2>
            <ul>
                <li>☐ <strong>Security</strong>: IAM roles follow least privilege</li>
                <li>☐ <strong>Monitoring</strong>: CloudWatch alarms configured</li>
                <li>☐ <strong>Logging</strong>: Structured logging enabled</li>
                <li>☐ <strong>Performance</strong>: Memory and timeout optimized</li>
                <li>☐ <strong>Backup</strong>: Infrastructure as Code in version control</li>
                <li>☐ <strong>Testing</strong>: Integration tests pass</li>
                <li>☐ <strong>Documentation</strong>: Deployment runbooks updated</li>
                <li>☐ <strong>Alerting</strong>: Error notifications configured</li>
            </ul>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>